{"ast":null,"code":"import { __decorate, __param } from 'tslib';\nimport { ElementRef, Inject, HostBinding, Component, ChangeDetectionStrategy, ɵɵdefineInjectable, ɵɵinject, Injectable, NgModule } from '@angular/core';\nimport { isNumber, TuiDestroyService, tuiPure, AbstractTuiDialogService, TuiIdService, TUI_ALERTS } from '@taiga-ui/cdk';\nimport { tuiFadeIn, tuiSlideInRight, tuiHeightCollapse } from '@taiga-ui/core/animations';\nimport { TUI_NOTIFICATION_OPTIONS, TUI_ANIMATION_OPTIONS } from '@taiga-ui/core/tokens';\nimport { POLYMORPHEUS_CONTEXT, PolymorpheusComponent, PolymorpheusModule } from '@tinkoff/ng-polymorpheus';\nimport { timer, fromEvent } from 'rxjs';\nimport { takeUntil, repeatWhen } from 'rxjs/operators';\nimport { CommonModule } from '@angular/common';\nimport { TuiNotificationModule } from '@taiga-ui/core/components/notification';\nimport { TuiIdService as TuiIdService$1 } from '@taiga-ui/cdk/services'; // TODO: Refactor according to new context by 3.0 and get rid of $any in template\n\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '@angular/common';\nimport * as ɵngcc2 from '@taiga-ui/core/components/notification';\nimport * as ɵngcc3 from '@tinkoff/ng-polymorpheus';\nimport * as ɵngcc4 from '@taiga-ui/cdk';\n\nfunction TuiAlertComponent_tui_notification_0_label_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"label\", 5);\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"content\", ctx_r3.item.label)(\"context\", ctx_r3.context);\n  }\n}\n\nfunction TuiAlertComponent_tui_notification_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"tui-notification\", 2);\n    ɵngcc0.ɵɵlistener(\"close\", function TuiAlertComponent_tui_notification_0_Template_tui_notification_close_0_listener() {\n      ɵngcc0.ɵɵrestoreView(_r5);\n      const ctx_r4 = ɵngcc0.ɵɵnextContext();\n      return ctx_r4.closeNotification();\n    });\n    ɵngcc0.ɵɵtemplate(1, TuiAlertComponent_tui_notification_0_label_1_Template, 1, 2, \"label\", 3);\n    ɵngcc0.ɵɵelement(2, \"div\", 4);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"status\", ctx_r0.item.status)(\"hasIcon\", ctx_r0.item.hasIcon);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r0.item.label);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"content\", ctx_r0.item.content)(\"context\", ctx_r0.context);\n  }\n}\n\nfunction TuiAlertComponent_ng_template_1_label_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"label\", 5);\n  }\n\n  if (rf & 2) {\n    const ctx_r6 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"content\", ctx_r6.item.label)(\"context\", ctx_r6.context);\n  }\n}\n\nfunction TuiAlertComponent_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"tui-notification\", 6);\n    ɵngcc0.ɵɵtemplate(1, TuiAlertComponent_ng_template_1_label_1_Template, 1, 2, \"label\", 3);\n    ɵngcc0.ɵɵelement(2, \"div\", 4);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"status\", ctx_r2.item.status)(\"hasIcon\", ctx_r2.item.hasIcon);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r2.item.label);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"content\", ctx_r2.item.content)(\"context\", ctx_r2.context);\n  }\n}\n\nlet TuiAlertComponent = /*#__PURE__*/(() => {\n  let TuiAlertComponent = class TuiAlertComponent {\n    constructor(elementRef, destroy$, options, animationOptions, item) {\n      this.elementRef = elementRef;\n      this.destroy$ = destroy$;\n      this.options = options;\n      this.animationOptions = animationOptions;\n      this.item = item;\n      this.autoClose = typeof this.item.autoClose === 'function' ? this.item.autoClose(this.item.status) : this.item.autoClose;\n      this.animation = Object.assign({\n        value: ''\n      }, this.animationOptions);\n    }\n\n    ngOnInit() {\n      this.initAutoClose();\n    }\n\n    get context() {\n      return this.calculateContext(this.item);\n    }\n\n    closeNotification() {\n      this.item.$implicit.complete();\n    }\n\n    calculateContext({\n      $implicit,\n      status,\n      data,\n      label\n    }) {\n      return {\n        $implicit: status,\n        data,\n        label,\n        closeHook: () => {\n          $implicit.complete();\n        },\n        emitHook: data => {\n          $implicit.next(data);\n        },\n        emitAndCloseHook: data => {\n          $implicit.next(data);\n          $implicit.complete();\n        }\n      };\n    }\n\n    initAutoClose() {\n      if (!this.autoClose) {\n        return;\n      }\n\n      timer(isNumber(this.autoClose) ? this.autoClose : this.options.defaultAutoCloseTime).pipe(takeUntil(fromEvent(this.elementRef.nativeElement, 'mouseenter')), // eslint-disable-next-line rxjs/no-ignored-notifier\n      repeatWhen(() => fromEvent(this.elementRef.nativeElement, 'mouseleave')), takeUntil(this.destroy$)).subscribe(() => this.closeNotification());\n    }\n\n  };\n\n  TuiAlertComponent.ɵfac = function TuiAlertComponent_Factory(t) {\n    return new (t || TuiAlertComponent)(ɵngcc0.ɵɵdirectiveInject(ElementRef), ɵngcc0.ɵɵdirectiveInject(TuiDestroyService), ɵngcc0.ɵɵdirectiveInject(TUI_NOTIFICATION_OPTIONS), ɵngcc0.ɵɵdirectiveInject(TUI_ANIMATION_OPTIONS), ɵngcc0.ɵɵdirectiveInject(POLYMORPHEUS_CONTEXT));\n  };\n\n  TuiAlertComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: TuiAlertComponent,\n    selectors: [[\"tui-alert\"]],\n    hostAttrs: [\"role\", \"alert\"],\n    hostVars: 3,\n    hostBindings: function TuiAlertComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵsyntheticHostProperty(\"@tuiFadeIn\", ctx.animation)(\"@tuiSlideInRight\", ctx.animation)(\"@tuiHeightCollapse\", ctx.animation);\n      }\n    },\n    features: [ɵngcc0.ɵɵProvidersFeature([TuiDestroyService])],\n    decls: 3,\n    vars: 2,\n    consts: [[3, \"status\", \"hasIcon\", \"close\", 4, \"ngIf\", \"ngIfElse\"], [\"noClose\", \"\"], [3, \"status\", \"hasIcon\", \"close\"], [\"polymorpheus-outlet\", \"\", \"automation-id\", \"tui-notification-alert__heading\", \"class\", \"heading\", 3, \"content\", \"context\", 4, \"ngIf\"], [\"polymorpheus-outlet\", \"\", \"automation-id\", \"tui-notification-alert__content\", 1, \"content\", 3, \"content\", \"context\"], [\"polymorpheus-outlet\", \"\", \"automation-id\", \"tui-notification-alert__heading\", 1, \"heading\", 3, \"content\", \"context\"], [3, \"status\", \"hasIcon\"]],\n    template: function TuiAlertComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, TuiAlertComponent_tui_notification_0_Template, 3, 5, \"tui-notification\", 0);\n        ɵngcc0.ɵɵtemplate(1, TuiAlertComponent_ng_template_1_Template, 3, 5, \"ng-template\", null, 1, ɵngcc0.ɵɵtemplateRefExtractor);\n      }\n\n      if (rf & 2) {\n        const _r1 = ɵngcc0.ɵɵreference(2);\n\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.item.hasCloseButton)(\"ngIfElse\", _r1);\n      }\n    },\n    directives: [ɵngcc1.NgIf, ɵngcc2.TuiNotificationComponent, ɵngcc3.PolymorpheusOutletComponent],\n    styles: [\"[_nghost-%COMP%]{box-shadow:0 .5rem 1rem rgba(0,0,0,.16);display:block;border-radius:var(--tui-radius-m);width:18rem;margin:2rem 3rem 0 auto}tui-root._mobile   [_nghost-%COMP%]{margin:1rem 1rem 0 auto}[_nghost-%COMP%]:not(:first-child){margin-top:.75rem}@media screen and (min-width:80em){[_nghost-%COMP%]{width:23rem}}.heading[_ngcontent-%COMP%]{font:var(--tui-font-text-m);line-height:1.25rem;font-weight:700;margin:0}.content[_ngcontent-%COMP%]{color:var(--tui-text-01);word-wrap:break-word}.content[_ngcontent-%COMP%]:empty{display:none}\"],\n    data: {\n      animation: [tuiFadeIn, tuiSlideInRight, tuiHeightCollapse]\n    },\n    changeDetection: 0\n  });\n\n  __decorate([HostBinding('@tuiFadeIn'), HostBinding('@tuiSlideInRight'), HostBinding('@tuiHeightCollapse')], TuiAlertComponent.prototype, \"animation\", void 0);\n\n  __decorate([tuiPure], TuiAlertComponent.prototype, \"calculateContext\", null);\n\n  TuiAlertComponent = __decorate([__param(0, Inject(ElementRef)), __param(1, Inject(TuiDestroyService)), __param(2, Inject(TUI_NOTIFICATION_OPTIONS)), __param(3, Inject(TUI_ANIMATION_OPTIONS)), __param(4, Inject(POLYMORPHEUS_CONTEXT))], TuiAlertComponent);\n  return TuiAlertComponent;\n})();\nlet TuiAlertService = /*#__PURE__*/(() => {\n  let TuiAlertService = class TuiAlertService extends AbstractTuiDialogService {\n    constructor(defaultOptions, idService) {\n      super(idService);\n      this.defaultOptions = defaultOptions;\n      this.component = new PolymorpheusComponent(TuiAlertComponent);\n    }\n\n  };\n\n  TuiAlertService.ɵfac = function TuiAlertService_Factory(t) {\n    return new (t || TuiAlertService)(ɵngcc0.ɵɵinject(TUI_NOTIFICATION_OPTIONS), ɵngcc0.ɵɵinject(TuiIdService));\n  };\n\n  TuiAlertService.ɵprov = ɵɵdefineInjectable({\n    factory: function TuiAlertService_Factory() {\n      return new TuiAlertService(ɵɵinject(TUI_NOTIFICATION_OPTIONS), ɵɵinject(TuiIdService$1));\n    },\n    token: TuiAlertService,\n    providedIn: \"root\"\n  });\n  TuiAlertService = __decorate([__param(0, Inject(TUI_NOTIFICATION_OPTIONS)), __param(1, Inject(TuiIdService))], TuiAlertService);\n  /** @deprecated use {@link TuiAlertService} */\n\n  return TuiAlertService;\n})();\nlet TuiNotificationsService = /*#__PURE__*/(() => {\n  let TuiNotificationsService = class TuiNotificationsService {\n    constructor(alert) {\n      this.alert = alert;\n    }\n\n    show(content, options = {}) {\n      // @ts-ignore\n      return this.alert.open(content, options);\n    }\n\n  };\n\n  TuiNotificationsService.ɵfac = function TuiNotificationsService_Factory(t) {\n    return new (t || TuiNotificationsService)(ɵngcc0.ɵɵinject(TuiAlertService));\n  };\n\n  TuiNotificationsService.ɵprov = ɵɵdefineInjectable({\n    factory: function TuiNotificationsService_Factory() {\n      return new TuiNotificationsService(ɵɵinject(TuiAlertService));\n    },\n    token: TuiNotificationsService,\n    providedIn: \"root\"\n  });\n  TuiNotificationsService = __decorate([__param(0, Inject(TuiAlertService))], TuiNotificationsService);\n  return TuiNotificationsService;\n})();\nlet TuiAlertModule = /*#__PURE__*/(() => {\n  let TuiAlertModule = class TuiAlertModule {};\n\n  TuiAlertModule.ɵfac = function TuiAlertModule_Factory(t) {\n    return new (t || TuiAlertModule)();\n  };\n\n  TuiAlertModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: TuiAlertModule\n  });\n  TuiAlertModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    providers: [{\n      provide: TUI_ALERTS,\n      useExisting: TuiAlertService,\n      multi: true\n    }],\n    imports: [[CommonModule, PolymorpheusModule, TuiNotificationModule]]\n  });\n  /** @deprecated use {@link TuiAlertModule} */\n\n  return TuiAlertModule;\n})();\nlet TuiNotificationsModule = /*#__PURE__*/(() => {\n  let TuiNotificationsModule = class TuiNotificationsModule {};\n\n  TuiNotificationsModule.ɵfac = function TuiNotificationsModule_Factory(t) {\n    return new (t || TuiNotificationsModule)();\n  };\n\n  TuiNotificationsModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: TuiNotificationsModule\n  });\n  TuiNotificationsModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[TuiAlertModule]]\n  });\n  return TuiNotificationsModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(TuiAlertModule, {\n    declarations: function () {\n      return [TuiAlertComponent];\n    },\n    imports: function () {\n      return [CommonModule, PolymorpheusModule, TuiNotificationModule];\n    },\n    exports: function () {\n      return [TuiAlertComponent];\n    }\n  });\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(TuiNotificationsModule, {\n    imports: [TuiAlertModule]\n  });\n})();\n/**\n * Generated bundle index. Do not edit.\n */\n\n\nexport { TuiAlertComponent, TuiAlertModule, TuiAlertService, TuiNotificationsModule, TuiNotificationsService }; //# sourceMappingURL=taiga-ui-core-components-alert.js.map","map":null,"metadata":{},"sourceType":"module"}